<!-- Sidebar -->
<aside id="sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform -translate-x-full bg-white border-r border-gray-200 sm:translate-x-0 dark:bg-gray-800 dark:border-gray-700 pl-safe" aria-label="Sidebar">
    <div class="h-full px-3 pb-4 overflow-y-auto bg-white dark:bg-gray-800 ios-scroll">
        <ul class="space-y-1 font-medium">
            <!-- Dashboard -->
            <li>
                <a href="/dashboard" class="flex items-center p-3 min-h-[48px] text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group touch-target">
                    <i class="fas fa-home w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"></i>
                    <span class="ms-3 text-base" data-i18n="nav.dashboard">Dashboard</span>
                </a>
            </li>
            
            <!-- Tasks -->
            <li>
                <a href="/tasks" class="flex items-center p-3 min-h-[48px] text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group touch-target">
                    <i class="fas fa-tasks w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"></i>
                    <span class="flex-1 ms-3 text-base whitespace-nowrap" data-i18n="nav.tasks">Tareas</span>
                    {% if pending_tasks_count %}
                    <span class="inline-flex items-center justify-center w-6 h-6 p-3 ms-3 text-sm font-medium text-blue-800 bg-blue-100 rounded-full dark:bg-blue-900 dark:text-blue-300">
                        {{ pending_tasks_count }}
                    </span>
                    {% endif %}
                </a>
            </li>
            
            <!-- Rewards -->
            <li>
                <a href="/rewards" class="flex items-center p-3 min-h-[48px] text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group touch-target">
                    <i class="fas fa-gift w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"></i>
                    <span class="flex-1 ms-3 text-base whitespace-nowrap" data-i18n="nav.rewards">Recompensas</span>
                </a>
            </li>
            
            <!-- Consequences -->
            <li>
                <a href="/consequences" class="flex items-center p-3 min-h-[48px] text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group touch-target">
                    <i class="fas fa-exclamation-triangle w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"></i>
                    <span class="flex-1 ms-3 text-base whitespace-nowrap" data-i18n="nav.consequences">Consecuencias</span>
                    {% if active_consequences_count %}
                    <span class="inline-flex items-center justify-center w-6 h-6 p-3 ms-3 text-sm font-medium text-red-800 bg-red-100 rounded-full dark:bg-red-900 dark:text-red-300">
                        {{ active_consequences_count }}
                    </span>
                    {% endif %}
                </a>
            </li>
            
            <!-- Points History -->
            <li>
                <a href="/points" class="flex items-center p-3 min-h-[48px] text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group touch-target">
                    <i class="fas fa-star w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"></i>
                    <span class="flex-1 ms-3 text-base whitespace-nowrap" data-i18n="nav.points">Puntos</span>
                </a>
            </li>
            
            <!-- Divider -->
            <li class="pt-4 mt-4 space-y-1 border-t border-gray-200 dark:border-gray-700">
                <!-- Family (Parent only) -->
                {% if current_user and current_user.role|lower == 'parent' %}
                <a href="/family" class="flex items-center p-3 min-h-[48px] text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group touch-target">
                    <i class="fas fa-users w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"></i>
                    <span class="flex-1 ms-3 text-base whitespace-nowrap" data-i18n="nav.family">Familia</span>
                </a>
                {% endif %}
                
                <!-- Settings -->
                <a href="/settings" class="flex items-center p-3 min-h-[48px] text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group touch-target">
                    <i class="fas fa-cog w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"></i>
                    <span class="flex-1 ms-3 text-base whitespace-nowrap" data-i18n="nav.settings">Configuraci√≥n</span>
                </a>
            </li>
        </ul>
        
        <!-- User Points Display at bottom -->
        {% if current_user %}
        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 pb-safe">
            <div class="flex items-center min-h-[48px]">
                <div class="flex-shrink-0">
                    <i class="fas fa-star text-3xl text-yellow-400"></i>
                </div>
                <div class="flex-1 ms-3 min-w-0">
                    <p class="text-sm font-medium text-gray-900 dark:text-white">
                        <span data-i18n="sidebar.my_points">Mis Puntos</span>
                    </p>
                    <p class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">
                        {{ current_user.points }}
                    </p>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</aside>
